{"file":"stock-price.js","mappings":"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","names":["StockPrice","__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/stock-price/stock-price.css?tag=stock-price&encapsulation=shadow","src/components/stock-price/stock-price.tsx"],"sourcesContent":[":host {\n  display: block;\n  border: 2px solid #3b015d;\n  margin: 2rem;\n  padding: 1rem;\n  border-radius: 8px;\n  width: 350px;\n  margin: auto;\n  max-width: 100%;\n  font-family: sans-serif;\n}\n\nform {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  max-width: 300px;\n}\n\ninput[type='text'] {\n  padding: 5px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\nbutton {\n  padding: 10px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n#stock-price {\n  margin-top: 20px;\n  font-size: 1.2em;\n  text-align: center;\n  color: #333;\n  font-weight: lighter;\n  font-size: small;\n  font-style: oblique;\n}\n","import { Component, Element, Prop, Listen, State, Watch, h } from '@stencil/core';\n\n@Component({\n  tag: 'stock-price',\n  styleUrl: 'stock-price.css',\n  shadow: true,\n})\nexport class StockPrice {\n  input: HTMLInputElement;\n  @State() appState: 'idle' | 'loading' | 'success' | 'error' = 'idle';\n  @State() stockPrice: string = '';\n\n  // Refers to the host element of the component\n  @Element() el: HTMLElement;\n\n  @Prop({ mutable: true, reflect: true }) stockSymbol: string;\n\n  @Watch('stockSymbol')\n  stockSymbolChanged(newValue: string, oldValue: string) {\n    console.log(`stockSymbol changed from ${oldValue} to ${newValue}`);\n    if (newValue && newValue !== oldValue) {\n      this.input.value = newValue; // Update the input value when stockSymbol changes\n      this.fetchStockPriceForStockSymbol(newValue);\n    }\n  }\n\n  hostData() {\n    return {\n      class: 'error',\n    };\n  }\n\n  @Listen('stockSymbolChanged', { target: 'document' })\n  stockSymbolChangedListener(event: CustomEvent<string>) {\n    const newStockSymbol = event.detail;\n    console.log(`Received stock symbol from event: ${newStockSymbol}`);\n    this.stockSymbol = newStockSymbol; // Update the stockSymbol property\n  }\n\n  constructor() {\n    this.fetchStockPrice = this.fetchStockPrice.bind(this);\n  }\n\n  componentWillLoad() {\n    console.log('Component will load');\n    console.log(this.stockSymbol);\n  }\n\n  componentDidLoad() {\n    console.log('Component did load');\n    if (this.stockSymbol) {\n      this.input.value = this.stockSymbol; // Set the input value if stockSymbol is provided\n      this.fetchStockPriceForStockSymbol(this.stockSymbol);\n    }\n  }\n  componentWillUpdate() {\n    console.log('Component will update');\n  }\n\n  componentDidUpdate() {\n    console.log('Component did update');\n  }\n\n  componentWillRender() {\n    console.log('Component will render');\n  }\n\n  componentDidRender() {\n    console.log('Component did render');\n  }\n\n  disconnectedCallback() {\n    console.log('Component did unload');\n  }\n\n  fetchStockPrice = async (event: Event) => {\n    event.preventDefault();\n    // Option 1\n    // const form = event.target as HTMLFormElement;\n    // const stockSymbol = form['stock-symbol'].value.trim().toUpperCase();\n\n    //Option 2\n    // const stockSymbol = this.el.shadowRoot.querySelector<HTMLInputElement>('#stock-symbol')?.value.trim().toUpperCase();\n\n    //Option 3\n    const stockSymbol = this.input.value.trim().toUpperCase();\n    this.stockSymbol = stockSymbol; // Update the stockSymbol property\n    if (!stockSymbol) {\n      alert('Please enter a valid stock symbol.');\n      return;\n    }\n  };\n\n  private async fetchStockPriceForStockSymbol(stockSymbol: string) {\n    this.appState = 'loading';\n    const response = await fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${stockSymbol}&apikey=964XYIDUV8SBYCB0`);\n    const data = await response.json();\n    this.appState = 'success';\n    const stockPrice = data['Global Quote'] ? data['Global Quote']['05. price'] : '0.00';\n    this.stockPrice = stockPrice;\n  }\n\n  render() {\n    return [\n      <stock-finder style={{ marginLeft: '-16px', border: '0px', marginTop: '0px' }}></stock-finder>,\n      <form onSubmit={this.fetchStockPrice} style={{ margin: 'auto', padding: '1rem' }}>\n        <label htmlFor=\"stock-symbol\">Enter Stock Symbol:</label>\n        <input type=\"text\" id=\"stock-symbol\" name=\"stock-symbol\" placeholder=\"e.g., AAPL, GOOGL\" ref={el => (this.input = el)} value={this.stockSymbol} />\n        <button type=\"submit\">Get Price</button>\n      </form>,\n      <div>\n        <p id=\"stock-price\">\n          {this.appState == 'loading' ? (\n            <stock-loading></stock-loading>\n          ) : this.appState === 'success' ? (\n            `Current Price: ${this.stockPrice}`\n          ) : this.appState === 'error' ? (\n            'Something went wrong'\n          ) : (\n            ''\n          )}\n        </p>\n      </div>,\n    ];\n  }\n}\n"],"version":3}