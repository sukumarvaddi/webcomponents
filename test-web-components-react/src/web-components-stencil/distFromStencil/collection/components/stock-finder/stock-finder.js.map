{"version":3,"file":"stock-finder.js","sourceRoot":"","sources":["../../../src/components/stock-finder/stock-finder.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Event, Prop, State, Watch, h, EventEmitter } from '@stencil/core';\n\nexport interface StockSymbolMatch {\n  symbol: string;\n  name: string;\n  type: string;\n  region: string;\n  marketOpen: string;\n  marketClose: string;\n  timezone: string;\n  currency: string;\n  matchScore: string;\n}\n\n@Component({\n  tag: 'stock-finder',\n  styleUrl: 'stock-finder.css',\n  shadow: true,\n})\nexport class StockFinder {\n  input: HTMLInputElement;\n  @State() appState: 'idle' | 'loading' | 'success' | 'error' = 'idle';\n  @State() stockSymbols: { symbol: string; name: string }[] = [];\n  @Prop({ mutable: true, reflect: true }) stockSymbol: string;\n  @Watch('stockSymbol')\n  stockSymbolChanged(newValue: string, oldValue: string) {\n    console.log(`stockSymbol changed from ${oldValue} to ${newValue}`);\n    if (newValue && newValue !== oldValue) {\n      this.input.value = newValue;\n      this.fetchStockSymbols(newValue);\n    }\n  }\n\n  @Event({ eventName: 'stockSymbolChanged', bubbles: true, composed: true }) stockSymbolChangedEmitter: EventEmitter<string>;\n\n  formHandler(event: Event) {\n    event.preventDefault(); // Prevent the default form submission behavior\n    const userEnteredStockSymbol = this.input.value.trim();\n    this.stockSymbol = userEnteredStockSymbol; // Update the stockSymbol property\n  }\n\n  async fetchStockSymbols(stockSymbol: string) {\n    this.appState = 'loading';\n    await sleep(2000); // Set the app state to loading\n    const response = await fetch(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${stockSymbol}&apikey=G5Q599MACNAP8JET`);\n    const data = await response.json();\n    if (data.bestMatches === undefined) {\n      this.appState = 'error'; // Set the app state to error if no matches found\n      console.error('No matches found for the stock symbol:', stockSymbol);\n      this.stockSymbols = [];\n      return;\n    }\n    this.appState = 'success'; // Set the app state to success\n    this.stockSymbols = data?.bestMatches?.map((match: StockSymbolMatch) => ({ symbol: match['1. symbol'], name: match['2. name'] })) ?? [];\n    console.log('Fetched stock symbols:', this.stockSymbols);\n  }\n\n  fetchStockPrice(stockSymbol: string) {\n    this.stockSymbolChangedEmitter.emit(stockSymbol);\n  }\n\n  componentDidLoad() {\n    console.log('Component did load');\n    if (this.stockSymbol) {\n      this.input.value = this.stockSymbol; // Set the input value if stockSymbol is provided\n      this.fetchStockSymbols(this.stockSymbol);\n    }\n  }\n\n  render() {\n    return (\n      <Host>\n        <form onSubmit={this.formHandler.bind(this)}>\n          <label htmlFor=\"stock-symbol-finder\">Enter Stock Symbol:</label>\n          <input\n            type=\"text\"\n            id=\"stock-symbol-finder\"\n            placeholder=\"Enter stock symbol\"\n            ref={el => {\n              this.input = el;\n            }}\n            value={this.stockSymbol}\n          />\n          <button type=\"submit\">Find Stock</button>\n        </form>\n        {this.stockSymbols.length > 0 && (\n          <ul class=\"stock-symbols-list\">\n            {this.stockSymbols.map(stock => (\n              <li key={stock.symbol} onClick={this.fetchStockPrice.bind(this, stock.symbol)}>\n                <strong>{stock.symbol}</strong> - {stock.name}\n              </li>\n            ))}\n          </ul>\n        )}\n        {this.appState === 'loading' && <stock-loading style={{ width: 'fit-content', margin: 'auto' }}></stock-loading>}\n        {this.appState !== 'idle' && this.stockSymbols.length === 0 && !this.stockSymbol && <p class=\"instruction\">Please enter a stock symbol to search.</p>}\n        {this.appState === 'error' && <p class=\"error\">Something went wrong.</p>}\n        {/* <p>Note: This component uses the Alpha Vantage API for stock symbol search.</p>\n        <p>API Key: 964XYIDUV8SBYCB0</p>\n        <p>\n          For more information, visit <a href=\"https://www.alphavantage.co/documentation/\">Alpha Vantage Documentation</a>.\n        </p> */}\n      </Host>\n    );\n  }\n}\nfunction sleep(time: number) {\n  return new Promise(resolve => setTimeout(resolve, time));\n}\n"]}